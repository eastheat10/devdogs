<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>개발자들</title>
    <link rel="stylesheet" th:href="@{/css/join.css}">
</head>
<body>
<nav class="menu">
    <a href="@{index}"><img class="logo" th:src="@{/image/devdogs_logo.png}"></a>
    <ul>
        <li class="nav01"><a href="#">자유게시판</a></li>
        <li class="nav02"><a href="#">프로젝트</a></li>
        <li class="nav03"><a href="#">활동내역</a></li>
        <li class="nav04"><a href="#">회원명단</a></li>
    </ul>
    <a th:href="@{/myPage}"><img class="img01" th:src="@{/image/mypage_icon.png}"></a>
    <a th:href="@{/signin}"><img class="img02" th:src="@{/image/login_icon.png}"></a>
</nav>

<div class="none_center">
    <h3>회 원 가 입</h3>
    <hr>
    <div class="div">
        <form class="form" th:object="${memberDto}" method="post">
            <table>
                <tr>
                    <td class="txt">이름</td>
                    <td>
                        <input class="box" type="text" th:field="*{name}" placeholder="이름을 입력하세요">
                    </td>
                    <td class="err" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"/>
                </tr>
                <tr>
                    <td></td>

                </tr>

                <tr>
                    <td class="txt">학번</td>
                    <td>
                        <input class="box" id="user_id" type="text" th:field="*{studentId}" placeholder="학번을 입력하세요">
                    </td>
                    <td class="err" th:if="${#fields.hasErrors('studentId')}" th:errors="*{studentId}"/>
                </tr>
                <tr>
                    <td></td>
                    <td class="check_font" id="id_check" />
                </tr>

                <tr>
                    <td class="txt">비밀번호</td>
                    <td>
                        <input class="box" type="password" th:field="*{password}" placeholder="비밀번호를 입력하세요">
                    </td>
                    <td class="err" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"/>
                </tr>

                <tr>
                    <td class="txt">비밀번호 확인</td>
                    <td>
                        <input class="box" type="password" placeholder="비밀번호를 확인하세요">
                    </td>
                    <td>
                        <input class="ok" type="submit" value="확인"></td>
                </tr>
                <tr>
                    <td class="txt">동아리 가입일</td>
                    <td>
                        <input class="box" type="date" th:field="*{joinDate}" placeholder="동아리 가입일을 입력하세요">
                    </td>
                    <td class="err" th:if="${#fields.hasErrors('joinDate')}" th:errors="*{joinDate}"/>
                </tr>

                <tr>
                    <td class="txt">이메일</td>
                    <td><input class="box" type="email" th:field="*{email}" placeholder=" example@abc.com"></td>
                    <td class="err" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"/>
                </tr>

                <tr>
                    <td class="txt">전화번호</td>
                    <td><input class="box" th:field="*{phoneNumber}" type="tel" placeholder=" 010-1234-5678"></td>
                    <td class="err" th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}"/>
                </tr>

            </table>
            <br><br><br>
            <button type="submit">가입하기</button>
        </form>
    </div>
</div>
<script src="join.js">
    $("#user_id").blur(function() {
        // id = "id_reg" / name = "userId"
        var user_id = $('#user_id').val();
        $.ajax({
            url : '${pageContext.request.contextPath}/user/idCheck?studentId='+ user_id,
            type : 'get',
            success : function(data) {
                console.log("1 = 중복o / 0 = 중복x : "+ data);

                if (data != 0) {
                    // 1 : 아이디가 중복되는 문구
                    $("#id_check").text("사용중인 아이디입니다");
                    $("#id_check").css("color", "red");
                    $("#reg_submit").attr("disabled", true);
                }
                else {
                    alert("사용가능한 아이디입니다.")
                }
            }, error : function() {
                console.log("실패");
            }
        });
    });
</script>
</body>
</html>